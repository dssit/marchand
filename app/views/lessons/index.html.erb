<%# <%= render 'site/search_sidebar', page: "lessons", target_page: "/lessons" %> %>

<div class="container lesson-card-group col-xs-8 pull-right">
  <div class="row">
    <div class="col-md-12 col-sm-12 panel panel-default lesson-header">
      <h5 class="col-md-2 col-sm-2"><strong>Grade</strong></h5>
      <h5 class="col-md-6 col-sm-6"><strong>Title</strong></h5>
      <h5 class="col-md-3 col-sm-4"><strong>Actions</strong></h5>
    </div>
  </div>

  <% @lessons.each do |lesson| %>
  <% lesson.pdf = "" if lesson.pdf.nil? %>
  <div class="row">
    <%= link_to lesson, class: 'link-to-lesson-content' do %>
      <div class="col-md-12 col-sm-12 lesson-content panel panel-default">
        <div class="col-md-12 header">
          <span class="col-md-2 col-sm-2"><%= lesson.grade %></span>
          <span class="col-md-6 col-sm-6"><%= lesson.title %></span>

          <div class="col-md-3 col-sm-4 lesson-file">
            <% if lesson.pdf.attached? %>
              <%= link_to lesson.pdf, download: '' do %>
                <i class="glyphicon glyphicon-save" title="Download"></i>
              <% end %>
              <%= link_to lesson.pdf do %>
                <i class="glyphicon glyphicon-file" title="View online"></i>
              <% end %>
            <% else %>
              <i class="glyphicon glyphicon-envelope" title="Request documents"></i>
            <% end %>

            <% if admin? %>
              <a href="lessons/<%= lesson.id %>/edit"><i class="glyphicon glyphicon-pencil" title="Edit"></i></a>
              <%= link_to url_for(controller: :lessons, action: :destroy, id: lesson.id), method: :delete, data: { confirm: "Are you sure?"} do %>
                <i class="glyphicon glyphicon-trash" title="Delete"></i>
              <% end %>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
  <% end %>

  <!-- pagination -->
  <% if @num_pages > 1 %>
  <div class="apple_pagination">
    <%= will_paginate @lessons, params: params %>
  </div>
  <% end %>
</div>
